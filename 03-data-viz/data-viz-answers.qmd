---
title: "Data visualization practice"
format: gfm
editor: visual
---

```{r load-packages, include=FALSE}
library(tidyverse)
library(palmerpenguins)
library(lterdatasampler)
```

## Basic ggplot practice

1. Read this and run the code below: First we'll create a data object called `penguins` that has missing values removed. Then we'll use the `glimpse()` function to glimpse at the penguins data frame.

```{r glimpse-penguins}
penguins <- penguins |> 
  drop_na()

glimpse(penguins)
```



2. Run the code below to make a scatter plot with `flipper_length_mm` mapped to the x-axis and `body_mass_g` mapped to the y-axis. Look at code and see if you can figure out what the different arguments do. Recall from the slides that `ggplot()` works like this:

ggplot([dataset], 
       mapping = aes(x = [x-variable], y = [y-variable])) +
   geom_xxx() +
   other options
   
```{r penguin-plot}
ggplot(penguins, aes(x = flipper_length_mm, 
                     y = body_mass_g)) +
  geom_point()
```

**What can we infer about the relationship between flipper length and body mass from this plot?**



3. Modify the scatter plot we created ablove to: 

- map color to `sex`,  
- add a title and axis labels with units

Replace the `---` to complete the code.

```{r penguin-plot-pretty}
ggplot(penguins, aes(x = flipper_length_mm, 
                     y = body_mass_g,
                     color = sex)) +
  geom_point() +
  labs(x = "Flipper length (mm)",
       y = "Body mass (g)",
       title = "Penguin flipper length vs. body mass")
```


4. Copy and paste the code from above into the chunk below, then facet by species using `facet_wrap()`

Replace the `---` to complete the code.

```{r penguin-plot-facet}
ggplot(penguins, aes(x = flipper_length_mm, 
                     y = body_mass_g,
                     color = sex)) +
  geom_point() +
  labs(x = "Flipper length (mm)",
       y = "Body mass (g)") +
  facet_wrap(~species)
```

**What can we infer about differences in mass across species from this plot?**



5. Copy and paste the code from above into the chunk below, then replace `facet_wrap` with `facet_grid` to facet by both `island` and `species`.

```{r penguin-plot-grid}
ggplot(penguins, aes(x = flipper_length_mm, 
                     y = body_mass_g,
                     color = sex)) +
  geom_point() +
  labs(x = "Flipper length (mm)",
       y = "Body mass (g)") +
  facet_grid(island~species)
```

**What do we learn about which species live on each of the three islands from this figure?**



## Plot the KNZ Bison data

6. Read the text and run the code below:

Lets explore another dataset. We can use the `glimpse()` function to take a look at the `knz_bison` dataset from the `lterdatasampler` package (more on this later). The dataset contains bison weights recorded for the herd at Konza Prairie Biological Station, one of many Long Term Ecological Research (LTER) site in the US. 

We'll create a new data object called `bison` that includes the calculated bison age. We can then type the name of the data object into the console to see the column names, data types, and first 10 observations of the dataframe.

```{r}
glimpse(knz_bison)

bison <- knz_bison |> 
  mutate(age = rec_year - animal_yob)

bison
```


7. Using the `bison` dataset, create a scatter plot with animal `age` mapped to the x-axis and `animal_weight` mapped to the y-axis.

```{r}
ggplot(bison, aes(x = age, 
                  y = animal_weight)) +
  geom_point()
```



8. Copy and paste the code from above into the chunk below. Map color to `animal_sex` and set alpha to 0.5. Add nice axis labels with units, add a plot title, and make a nicer label for color. Weights are measured in lb.

```{r}
ggplot(bison, aes(x = age, 
                  y = animal_weight, 
                  color = animal_sex)) +
  geom_point(alpha = 0.5) +
  labs(x = "Age", 
       y = "Weight (lb)", 
       title = "Bison age vs. weight")
```

**What can we learn about the age, weight, and sex of the bison herd from this plot?**



